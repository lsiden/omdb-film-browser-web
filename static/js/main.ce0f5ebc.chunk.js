(this["webpackJsonpomdb-film-browser-web"]=this["webpackJsonpomdb-film-browser-web"]||[]).push([[0],{67:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function o(){if("serviceWorker"in navigator){if(new URL("/omdb-film-browser-web",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/omdb-film-browser-web","/service-worker.js");a?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):r(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):r(e)}))}}},68:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(23),i=n(2),c=n(10),l={background:"linear-gradient(to right, #000040, #3b00ff)",padding:"10px",color:"white"},u={fontSize:22,marginTop:10},s=function(){return r.a.createElement("a",{href:"/about",style:{color:"white"}},"about")},m=function(){return r.a.createElement("header",{style:l},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h1",{style:u},"Open Movie Database Browser"),!/about\/?$/.test(window.location.href)&&r.a.createElement(s,null)))},f=n(13),d=n(18),h=n(14),p=n(15),y=n(32),b=n.n(y),v={color:"#210d87"},g=function(e){var t=e.filmSummary;return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/film/".concat(t.imdbID),style:v,title:"View film details"},"".concat(t.Title,", ").concat(t.Year)))},E=n(69),w=n(63),S=n.n(w),k=n(64),D=n.n(k),O=n(3),j=n(20),T=n(65),I={UPDATE_FILMS:"update-films",APPEND_FILMS:"append-films",UPDATE_FILM_DETAILS:"update-film-details",UPDATE_IS_FETCHING:"update-is-fetching",SET_QUERY:"set-query"},C=function(e,t){return e[t.imdbID]=t,e};function _(e,t){return Object(O.a)(Object(O.a)({},e),{},{films:(t.films||[]).reduce(C,{})})}function L(e,t){return Object(O.a)(Object(O.a)({},e),{},{films:(t.films||[]).reduce(C,Object(O.a)({},e.films||{}))})}function P(e){return Object.values(e.films||{})}var F={view:I.VIEW_FILM_LIST,isFetching:!1,films:[],totalResults:0,query:""};var A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||j.c,q=Object(j.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case I.UPDATE_FILM_DETAILS:case I.UPDATE_IS_FETCHING:case I.SET_QUERY:return Object(O.a)(Object(O.a)({},e),a);case I.UPDATE_FILMS:return _(e,a);case I.APPEND_FILMS:return L(e,a);default:return e}}),A(Object(j.a)(T.a))),M=function(e){return{type:I.UPDATE_FILM_DETAILS,data:{filmDetails:e}}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:I.UPDATE_FILMS,data:{films:t,query:e,totalResults:n,pageNum:1}}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:I.SET_QUERY,data:{query:e}}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:I.UPDATE_IS_FETCHING,data:{isFetching:e}}};function x(e){try{return e.json()}catch(t){return Promise.reject(t)}}D.a.shim();var B=function(e){console.error(e),S.a.error(e,"An error occured",{preventDuplicates:!0})},W=function(e,t){var n,a=new Promise((function(e,t){n=setTimeout((function(){t(new Error("Unable to fetch data. Try a different title or try again later."))}),1e4)}));return e(N(!0)),Promise.race([a,fetch(t)]).then(x).catch(B).finally((function(){clearTimeout(n),e(N(!1))}))},z=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.call(this)).ignore=!0,e}return n}(Object(E.a)(Error)),H=function(){},Q=function(e){return function(t){return H(),new Promise((function(n,a){return H=function(){a(new z('query "'.concat(e,'" was cancelled'))),t(N(!1))},W(t,"https://www.omdbapi.com?apikey=fbfcb8c7&type=movie&s=".concat(e)).then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a&&a.Search&&a.Search.length?n(t(R(e,a.Search,a.totalResults))):n(t(R(e,[],0)))}))})).catch((function(e){e.ignore||console.error(e)})).finally((function(){H=function(){}}))}},Y=function(){return function(e){var t=q.getState(),n=t.query,a=t.pageNum,r=(void 0===a?1:a)+1;return W(e,"https://www.omdbapi.com?apikey=fbfcb8c7&type=movie&s=".concat(n,"&page=").concat(r)).then((function(t){t&&t.Search&&t.Search.length&&e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:I.APPEND_FILMS,data:{films:t,pageNum:e}}}(r,t.Search))}))}},G=function(e){var t=e.style,n=e.onClick,a=e.children;return r.a.createElement("button",{type:"button",onClick:n,className:"btn btn-link",style:t},a)};G.defaultProps={style:{}};var V=G,J={marginBottom:20,fontSize:20,color:"darkgrey"},X=Object(c.b)((function(){return{}}),(function(e){return{dispatchPageFetch:function(){return e(Y())}}}))((function(e){var t=e.dispatchPageFetch;return r.a.createElement(V,{onClick:t,style:J,title:"More"},"More")}));function $(){window.scrollTo(0,0)}var K=n(25),Z={position:"absolute",top:"-4pt",left:"6pt",color:"#888",fontSize:"20pt",transform:"rotate(-45deg)"},ee=function(){return r.a.createElement("span",{style:Z,charSet:"utf-8",dangerouslySetInnerHTML:{__html:"\u26b2"}})},te={position:"absolute",top:6,right:6,fontSize:"8pt",color:"#888"},ne=function(e){var t=e.onClick;return r.a.createElement("span",{role:"button",tabIndex:0,"aria-label":"Cancel",className:"hover-pointer",style:te,charSet:"utf-8",dangerouslySetInnerHTML:{__html:"\u274c"},onClick:t,onKeyPress:t})};ne.defaultProps={onClick:function(){}};var ae={position:"relative",width:"100%"},re={height:"24pt",textIndent:"24pt",fontSize:"12pt",color:"black",width:"100%"},oe=function(e){var t=e.value,n=e.onCancelClick,a=e.onChange,o=e.placeholder;return r.a.createElement("div",{style:ae},r.a.createElement(ee,null),r.a.createElement("input",{type:"search",value:t,placeholder:o,onChange:a,style:re}),r.a.createElement(ne,{onClick:n}))};oe.defaultProps={value:"",placeholder:""};var ie=oe,ce={display:"flex"},le={marginRight:"1em"},ue={flex:"1 1"},se=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).ref=r.a.createRef(),a.handleInput=a.handleInput.bind(Object(K.a)(a)),a.handleCancel=a.handleCancel.bind(Object(K.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){if(this.ref.current){var e=this.ref.current.querySelector("input[type=search]");e&&e.focus()}}},{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"replaceUriHistory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?"/search/".concat(e):"/";window.history.replaceState({},"",t)}},{key:"handleCancel",value:function(){this.replaceUriHistory(),this.props.clearResults()}},{key:"handleInput",value:function(e){var t=this.props,n=t.clearResults,a=t.dispatchSetQuery,r=e.target.value;this.replaceUriHistory(r),r?a(r):n()}},{key:"render",value:function(){var e=this.props.query;return r.a.createElement("form",{ref:this.ref,style:l},r.a.createElement("div",{style:ce},r.a.createElement("label",{htmlFor:"query-form-search-input",style:le},"Search"),r.a.createElement(ie,{style:ue,id:"query-form-search-input",placeholder:"Film Title ...",value:e,onChange:this.handleInput,onCancelClick:this.handleCancel})))}}]),n}(r.a.Component);se.defaultProps={query:""};var me=Object(c.b)((function(e){return{query:e.query||""}}),(function(e){return{dispatchSetQuery:function(t){e(U(t)),e(Q(t))},clearResults:function(){return e(R())}}}))(se),fe={listStyleType:"none",lineHeight:1.5,marginTop:20},de={fontSize:"14pt",color:"#210d87",margin:"1em"},he={marginLeft:40,display:"flex",justifyContent:"flex-start",alignItems:"baseline"},pe={marginLeft:40,fontSize:16,color:"darkgrey"},ye={margin:50},be=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(f.a)(this,n);var r=e.query,o=e.dispatchSetQuery;return a=t.call(this,e),o(r),a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){window.scrollTo(0,document.body.scrollHeight)}},{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"renderInner",value:function(){var e=this.props,t=e.query,n=e.films,a=e.totalResults;return e.isFetching?r.a.createElement(b.a,{style:ye}):0===t.length?r.a.createElement("div",{style:de}," Search for a title. "):t.length>0&&0===n.length?r.a.createElement("div",{style:de}," There are no films that match your query. "):r.a.createElement("div",null,r.a.createElement("ul",{style:fe},n.map((function(e){return r.a.createElement(g,{key:e.imdbID,filmSummary:e})}))),r.a.createElement("div",{style:he},n.length<a&&r.a.createElement(X,null),n&&n.length&&r.a.createElement(V,{onClick:$,style:pe,title:"Scroll to top of page"},"top")))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(me,null),this.renderInner())}}]),n}(r.a.Component);be.defaultProps={query:"",films:[],totalResults:0};var ve=Object(c.b)((function(e,t){return{query:t.query,films:P(e),totalResults:parseInt(e.totalResults,10)||0,isFetching:e.isFetching||!1}}),(function(e){return{dispatchSetQuery:function(t){e(U(t)),e(Q(t))}}}))(be),ge={fontSize:20},Ee=function(e){var t=e.buttonStyle,n=Object(i.e)();return r.a.createElement(V,{onClick:function(){return n.goBack()},style:Object(O.a)(Object(O.a)({},ge),t),title:"Close"},"\u2715")};Ee.defaultProps={buttonStyle:{}};var we=Ee,Se={marginBottom:"5pt"},ke={marginTop:20,fontSize:"14pt"},De={marginBottom:20},Oe={margin:50},je=function(e){return e&&"N/A"!==e},Te=Object(O.a)(Object(O.a)({},l),{},{display:"flex",justifyContent:"space-between"}),Ie=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatchFetchFilmDetails)(e.imdbID),document.addEventListener("keydown",n.keyDownListener)}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatchEraseFilmDetails)(),document.removeEventListener("keydown",n.keyDownListener)}},{key:"renderTitle",value:function(){var e=this.props.filmDetails;return e&&r.a.createElement("header",{style:Te},r.a.createElement("h2",{style:Object(O.a)(Object(O.a)({},Se),{},{marginTop:0})},e.Title),r.a.createElement(we,{buttonStyle:{color:"white"}}))}},{key:"renderDetails",value:function(){var e,t=this.props.filmDetails,n=function(e){var n=e.name,a=e.label;return r.a.createElement("li",null,a||n,": ",t[n])};return r.a.createElement("ul",{style:ke},r.a.createElement(n,{name:"Year"}),r.a.createElement(n,{name:"Director"}),r.a.createElement(n,{name:"Writer"}),r.a.createElement(n,{name:"Actors",label:"Cast"}),r.a.createElement(n,{name:"Language"}),je(t.Awards)&&r.a.createElement(n,{name:"Awards"}),r.a.createElement(n,{name:"Runtime",label:"Length"}),r.a.createElement(n,{name:"imdbRating",label:"IMDB Rating"}),r.a.createElement(n,{name:"BoxOffice"}),je(t.Website)&&r.a.createElement(n,{key:"Website",label:"Official Website"}),r.a.createElement("li",null,r.a.createElement("a",{href:(e=t.imdbID,"https://www.imdb.com/title/".concat(e))},"IMDB page")))}},{key:"render",value:function(){var e=this.props,t=e.filmDetails;return e.isFetching?r.a.createElement(b.a,{style:Oe,size:64}):t&&r.a.createElement("div",null,this.renderTitle(),r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement("img",{src:t.Poster,alt:"poster",style:{marginTop:10}}),this.renderDetails(),n.renderScrollToTopButton()))}}],[{key:"keyDownListener",value:function(e){27===e.keyCode&&window.history.back()}},{key:"renderScrollToTopButton",value:function(){return r.a.createElement(V,{style:De,onClick:$,title:"Scroll to top of page"},"Top")}}]),n}(r.a.Component);Ie.defaultProps={filmDetails:null};var Ce=Object(c.b)((function(e){return{filmDetails:e.filmDetails,isFetching:e.isFetching}}),(function(e){return{dispatchFetchFilmDetails:function(t){return e((n=t,function(e){return W(e,"https://www.omdbapi.com?apikey=fbfcb8c7&type=movie&i=".concat(n,"&plot=full")).then((function(t){return e(M(t))}))}));var n},dispatchEraseFilmDetails:function(){return e(M(null))}}}))(Ie),_e=n(66),Le=n.n(_e),Pe="\n## Written By\nLawrence Siden\n\n[Westside Consulting LLC](".concat("http://westsideconsultingllc.com",")\n\n[westsideconsultingllc@gmail.com](mailto:westsideconsultingllc@gmail.com)\n\n## Credits\n[Open Movie Database API](").concat("https://www.omdbapi.com/",")\n\n## Source Code\n").concat("https://github.com/lsiden/omdb-film-browser-web","\n"),Fe=Object(O.a)(Object(O.a)({},l),{},{display:"flex",justifyContent:"space-between"}),Ae=function(){return r.a.createElement("header",{style:Fe},r.a.createElement("h1",{style:{fontSize:28}},"About ".concat("Open Movie Database Browser")),r.a.createElement(we,{buttonStyle:{color:"white"}}))},qe=function(){return r.a.createElement("div",null,r.a.createElement(Ae,null),r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement(Le.a,{source:Pe})))},Me=function(e){var t=e.match;return r.a.createElement(Ce,{imdbID:t.params.imdbID})},Re=function(e){var t=e.match;return r.a.createElement(ve,{query:t.params.query})};t.a=function(){return r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement(c.a,{store:q},r.a.createElement(o.a,{basename:"/omdb-film-browser-web"},r.a.createElement("div",null,r.a.createElement(i.a,{exact:!0,path:"/",component:Re}),r.a.createElement(i.a,{path:"/search/:query",component:Re}),r.a.createElement(i.a,{path:"/film/:imdbID",component:Me}),r.a.createElement(i.a,{path:"/about",component:qe})))))}},70:function(e,t,n){e.exports=n(71)},71:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),a=n.n(t),r=n(60),o=n.n(r),i=n(68),c=n(67);n(195);o.a.render(a.a.createElement(i.a,null),document.getElementById("root")),"https:"===e.location.protocol&&Object(c.a)()}.call(this,n(21))}},[[70,1,2]]]);
//# sourceMappingURL=main.ce0f5ebc.chunk.js.map