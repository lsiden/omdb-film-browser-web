(this["webpackJsonpomdb-film-browser-web"]=this["webpackJsonpomdb-film-browser-web"]||[]).push([[0],{55:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function o(){if("serviceWorker"in navigator){if(new URL("/omdb-film-browser-web",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/omdb-film-browser-web","/service-worker.js");a?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):r(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):r(e)}))}}},56:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(19),i=n(2),c=n(10),l={background:"linear-gradient(to right, #000040, #3b00ff)",padding:"10px",color:"white"},u={fontSize:22,marginTop:10},s=function(){return r.a.createElement("a",{href:"/about",style:{color:"white"}},"about")},m=function(){return r.a.createElement("header",{style:l},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h1",{style:u},"Open Movie Database Browser"),!/about\/?$/.test(window.location.href)&&r.a.createElement(s,null)))},f=n(12),d=n(13),h=n(15),p=n(14),y=n(25),v=n.n(y),b={color:"#210d87"},g=function(e){var t=e.filmSummary;return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/film/".concat(t.imdbID),style:b,title:"View film details"},"".concat(t.Title,", ").concat(t.Year)))},w=n(51),E=n.n(w),k=n(17),O=n(52),j="update-films",C="append-films",S="update-film-details",D="update-is-fetching",T="set-query",q=n(3),I={isFetching:!1,films:[],totalResults:0,query:""};function R(e,t){return e[t.imdbID]=t,e}var L=function(e,t){return Object(q.a)(Object(q.a)({},e),{},{films:(t.films||[]).reduce(R,{}),totalResults:parseInt(t.totalResults||"0",10),pageNum:1})},F=function(e,t){return Object(q.a)(Object(q.a)({},e),{},{films:(t.films||[]).reduce(R,Object(q.a)({},e.films||{})),pageNum:t.pageNum})},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:T,data:{query:e}}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:j,data:{films:t,query:e,totalResults:n,pageNum:1}}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:C,data:{films:t,pageNum:e}}},x=function(e){return{type:S,data:{filmDetails:e}}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:D,data:{isFetching:e}}};function M(e){return Object.values(e.films||{})}var W=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||k.c,z=Object(k.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case S:case D:case T:return Object(q.a)(Object(q.a)({},e),a);case j:return L(e,a);case C:return F(e,a);default:return e}}),W(Object(k.a)(O.a))),U=function(e){return"".concat("https://www.omdbapi.com","?apikey=").concat("fbfcb8c7","&type=movie&s=").concat(e)};function A(e){try{return e.json()}catch(t){return Promise.reject(t)}}var H=function(e){console.error(e),E.a.error(e,"An error occured",{preventDuplicates:!0})},K=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,r=new Promise((function(e,t){n=setTimeout((function(){t(new Error("Unable to fetch data. Try a different title or try again later."))}),a)}));return e(B(!0)),Promise.race([fetch(t),r]).then(A).catch(H).finally((function(){clearTimeout(n),e(B(!1))}))},Q=function(e){return function(t){return K(t,U(e)).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{Search:[],totalResults:0};return t(P(e,n.Search,n.totalResults))}))}},X=function(){return function(e){var t=z.getState(),n=t.query,a=void 0===n?"":n,r=t.pageNum,o=(void 0===r?1:r)+1;return K(e,function(e,t){return U(e)+"&page=".concat(t)}(a,o)).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{Search:[],totalResults:0};e(N(o,t.Search))}))}},V=function(e){var t=e.style,n=e.onClick,a=e.children;return r.a.createElement("button",{type:"button",onClick:n,className:"btn btn-link",style:t},a)};V.defaultProps={style:{}};var J=V,Y={marginBottom:20,fontSize:20,color:"darkgrey"},$=Object(c.b)((function(){return{}}),(function(e){return{dispatchPageFetch:function(){return e(X())}}}))((function(e){var t=e.dispatchPageFetch;return r.a.createElement(J,{onClick:t,style:Y,title:"More"},"More")}));function G(){window.scrollTo(0,0)}var Z=n(20),ee=n(53),te=n.n(ee),ne={position:"absolute",top:"-4pt",left:"6pt",color:"#888",fontSize:"20pt",transform:"rotate(-45deg)"},ae={position:"absolute",bottom:4,right:8,color:"#888"},re=function(){return r.a.createElement("span",{style:ne,charSet:"utf-8",dangerouslySetInnerHTML:{__html:"\u26b2"}})},oe=function(e){var t=e.onClick;return r.a.createElement("span",{role:"button",tabIndex:0,"aria-label":"Cancel",className:"hover-pointer",style:ae,charSet:"utf-8",dangerouslySetInnerHTML:{__html:"\u2a09"},onClick:t,onKeyPress:t})};oe.defaultProps={onClick:function(){}};var ie={position:"relative",width:"100%"},ce={height:"24pt",textIndent:"24pt",fontSize:"12pt",color:"black",width:"100%"},le=function(e){var t=e.value,n=e.onCancelClick,a=e.onChange,o=e.placeholder;return r.a.createElement("div",{style:ie},r.a.createElement(re,null),r.a.createElement("input",{type:"search",value:t,placeholder:o,onChange:a,style:ce}),r.a.createElement(oe,{onClick:n}))};le.defaultProps={value:"",placeholder:""};var ue=le,se={display:"flex"},me={marginRight:"1em"},fe={flex:"1 1"},de=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).ref=r.a.createRef(),a.onChange=a.onChange.bind(Object(Z.a)(a)),a.onCancel=a.onCancel.bind(Object(Z.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){if(this.ref.current){var e=this.ref.current.querySelector("input[type=search]");e&&e.focus()}}},{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"onCancel",value:function(){this.replaceUriHistory(),this.props.clearResults()}},{key:"onChange",value:function(e){var t=this.props,n=t.clearResults,a=t.dispatchSetQuery,r=e.target.value;this.replaceUriHistory(r),r?a(r):n()}},{key:"replaceUriHistory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?"/search/".concat(e):"/";window.history.replaceState({},"",t)}},{key:"render",value:function(){var e=this.props.query;return r.a.createElement("form",{ref:this.ref,style:l},r.a.createElement("div",{style:se},r.a.createElement("label",{htmlFor:"query-form-search-input",style:me},"Search"),r.a.createElement(ue,{style:fe,id:"query-form-search-input",placeholder:"Film Title ...",value:e,onChange:this.onChange,onCancelClick:this.onCancel})))}}]),n}(r.a.Component);de.defaultProps={query:""};var he=Object(c.b)((function(e){return{query:e.query||""}}),(function(e){var t=te()((function(t){return e(Q(t))}),300);return{dispatchSetQuery:function(n){e(_(n)),t(n)},clearResults:function(){e(_("")),e(P())}}}))(de),pe={listStyleType:"none",lineHeight:1.5,marginTop:20},ye={fontSize:"14pt",color:"#210d87",margin:"1em"},ve={marginLeft:40,display:"flex",justifyContent:"flex-start",alignItems:"baseline"},be={marginLeft:40,fontSize:16,color:"darkgrey"},ge={margin:50},we=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(f.a)(this,n);var r=e.query,o=e.dispatchSetQuery;return a=t.call(this,e),r&&o(r),a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){window.scrollTo(0,document.body.scrollHeight)}},{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"renderInner",value:function(){var e=this.props,t=e.query,n=e.films,a=e.totalResults;return e.isFetching?r.a.createElement(v.a,{style:ge}):0===t.length?r.a.createElement("div",{style:ye}," Search for a title. "):t.length>0&&0===n.length?r.a.createElement("div",{style:ye}," There are no films that match your query. "):r.a.createElement("div",null,r.a.createElement("ul",{style:pe},n.map((function(e){return r.a.createElement(g,{key:e.imdbID,filmSummary:e})}))),r.a.createElement("div",{style:ve},n.length<a&&r.a.createElement($,null),n&&n.length&&r.a.createElement(J,{onClick:G,style:be,title:"Scroll to top of page"},"top")))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(he,null),this.renderInner())}}]),n}(r.a.Component);we.defaultProps={query:"",films:[],totalResults:0};var Ee=Object(c.b)((function(e,t){return{query:e.query||t.query,films:M(e),totalResults:e.totalResults||0,isFetching:e.isFetching||!1}}),(function(e){return{dispatchSetQuery:function(t){e(_(t)),e(Q(t))}}}))(we),ke={fontSize:20},Oe=function(e){var t=e.buttonStyle,n=Object(i.e)();return r.a.createElement(J,{onClick:n.goBack,style:Object(q.a)(Object(q.a)({},ke),t),title:"Close"},"\u2715")};Oe.defaultProps={buttonStyle:{}};var je=Oe,Ce={marginBottom:"5pt"},Se={marginTop:20,fontSize:"14pt"},De={marginBottom:20},Te={margin:50},qe=function(e){return e&&"N/A"!==e},Ie=Object(q.a)(Object(q.a)({},l),{},{display:"flex",justifyContent:"space-between"}),Re=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatchFetchFilmDetails)(e.imdbID),document.addEventListener("keydown",n.onKeyDown)}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatchEraseFilmDetails)(),document.removeEventListener("keydown",n.onKeyDown)}},{key:"renderTitle",value:function(){var e=this.props.filmDetails;return e&&r.a.createElement("header",{style:Ie},r.a.createElement("h2",{style:Object(q.a)(Object(q.a)({},Ce),{},{marginTop:0})},e.Title),r.a.createElement(je,{buttonStyle:{color:"white"}}))}},{key:"renderDetails",value:function(){var e,t=this.props.filmDetails,n=function(e){var n=e.name,a=e.label;return r.a.createElement("li",null,a||n,": ",t[n])};return r.a.createElement("ul",{style:Se},r.a.createElement(n,{name:"Year"}),r.a.createElement(n,{name:"Director"}),r.a.createElement(n,{name:"Writer"}),r.a.createElement(n,{name:"Actors",label:"Cast"}),r.a.createElement(n,{name:"Language"}),qe(t.Awards)&&r.a.createElement(n,{name:"Awards"}),r.a.createElement(n,{name:"Runtime",label:"Length"}),r.a.createElement(n,{name:"imdbRating",label:"IMDB Rating"}),r.a.createElement(n,{name:"BoxOffice"}),qe(t.Website)&&r.a.createElement(n,{key:"Website",label:"Official Website"}),r.a.createElement("li",null,r.a.createElement("a",{href:(e=t.imdbID,"https://www.imdb.com/title/".concat(e))},"IMDB page")))}},{key:"render",value:function(){var e=this.props,t=e.filmDetails;return e.isFetching?r.a.createElement(v.a,{style:Te,size:64}):t&&r.a.createElement("div",null,this.renderTitle(),r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement("img",{src:t.Poster,alt:"poster",style:{marginTop:10}}),this.renderDetails(),n.renderScrollToTopButton()))}}],[{key:"onKeyDown",value:function(e){27===e.keyCode&&window.history.back()}},{key:"renderScrollToTopButton",value:function(){return r.a.createElement(J,{style:De,onClick:G,title:"Scroll to top of page"},"Top")}}]),n}(r.a.Component);Re.defaultProps={filmDetails:null};var Le=Object(c.b)((function(e){return{filmDetails:e.filmDetails,isFetching:e.isFetching}}),(function(e){return{dispatchFetchFilmDetails:function(t){return e((n=t,function(e){return K(e,function(e){return"".concat("https://www.omdbapi.com","?apikey=").concat("fbfcb8c7","&type=movie&i=").concat(e,"&plot=full")}(n)).then((function(t){return e(x(t))}))}));var n},dispatchEraseFilmDetails:function(){return e(x(null))}}}))(Re),Fe=n(54),_e=n.n(Fe),Pe="\n## Written By\nLawrence Siden\n\n[Westside Consulting LLC](".concat("http://westsideconsultingllc.com",")\n\n[westsideconsultingllc@gmail.com](mailto:westsideconsultingllc@gmail.com)\n\n## Credits\n[Open Movie Database API](").concat("https://www.omdbapi.com/",")\n\n## Source Code\n").concat("https://github.com/lsiden/omdb-film-browser-web","\n"),Ne=Object(q.a)(Object(q.a)({},l),{},{display:"flex",justifyContent:"space-between"}),xe=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",n.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",n.onKeyDown)}},{key:"render",value:function(){return r.a.createElement("div",{style:{outline:"none"}},r.a.createElement("header",{style:Ne},r.a.createElement("h1",{style:{fontSize:28}},"About ".concat("Open Movie Database Browser")),r.a.createElement(je,{buttonStyle:{color:"white"}})),r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement(_e.a,{source:Pe})))}}],[{key:"onKeyDown",value:function(e){27===e.keyCode&&window.history.back()}}]),n}(r.a.Component),Be=function(e){var t=e.match;return r.a.createElement(Le,{imdbID:t.params.imdbID})},Me=function(e){var t=e.match;return r.a.createElement(Ee,{query:t.params.query})};t.a=function(){return r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement(c.a,{store:z},r.a.createElement(o.a,{basename:"/omdb-film-browser-web"},r.a.createElement(i.a,{exact:!0,path:"/",component:Me}),r.a.createElement(i.a,{path:"/search/:query",component:Me}),r.a.createElement(i.a,{path:"/film/:imdbID",component:Be}),r.a.createElement(i.a,{path:"/about",component:xe}))))}},57:function(e,t,n){e.exports=n(58)},58:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),a=n.n(t),r=n(48),o=n.n(r),i=n(56),c=n(55);n(156);o.a.render(a.a.createElement(i.a,null),document.getElementById("root")),"https:"===e.location.protocol&&Object(c.a)()}.call(this,n(18))}},[[57,1,2]]]);
//# sourceMappingURL=main.0e907ee0.chunk.js.map